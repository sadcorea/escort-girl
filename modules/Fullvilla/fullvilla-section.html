<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마사지 - Ecogirl.vn</title>
    <link rel="icon" type="image/png" href="../../shared/images/logo/favicon.png">
    
    <!-- 공용 스타일 (이거 하나로 모든 스타일 포함!) -->
    <link rel="stylesheet" href="../../shared/styles/main.css">
    
    <!-- 마사지 전용 스타일 -->
    <link rel="stylesheet" href="css/fullvilla-style.css">
    
    <!-- 플로팅 연락 버튼 공용 스크립트 -->
    <script src="../../shared/js/floating-contact.js"></script>
</head>
<body>
    <!-- 공용 헤더 include -->
    <div id="header-container"></div>

    <!-- 메인 컨텐츠 -->
    <main class="main-content">
        <div class="container">
            <div class="content-wrapper">
                <!-- 사이드바 필터 -->
                <aside class="filter-sidebar" id="filterSidebar">
                    <div class="filter-header">
                        <h2>필터</h2>
                        <button class="btn btn-ghost btn-sm filter-reset" id="resetFilters">초기화</button>
                    </div>
                    
                    <!-- 서비스 종류 -->
                    <div class="filter-group">
                        <h3>서비스 종류</h3>
                        <div class="filter-options" id="serviceFilters">
                            <!-- 동적으로 생성됩니다 -->
                        </div>
                    </div>

                    <!-- 언어 지원 -->
                    <div class="filter-group">
                        <h3>언어 지원</h3>
                        <div class="filter-options" id="languageFilters">
                            <!-- 동적으로 생성됩니다 -->
                        </div>
                    </div>

                    <!-- 특별 혜택 -->
                    <div class="filter-group">
                        <h3>특별 혜택</h3>
                        <div class="filter-options">
                            <label class="filter-checkbox">
                                <input type="checkbox" name="benefit" value="할인">
                                <span>할인 중인 업체만</span>
                            </label>
                        </div>
                    </div>

                    <!-- 지역 -->
                    <div class="filter-group">
                        <h3>지역</h3>
                        <div class="filter-options" id="locationFilters">
                            <!-- 동적으로 생성됩니다 -->
                        </div>
                    </div>
                </aside>

                <!-- 카드 그리드 -->
                <div class="cards-container">
                    <div class="cards-header">
                        <h2>마사지 업체</h2>
                        <div class="cards-info">
                            <span id="resultCount">전체 0개</span>
                        </div>
                    </div>
                    
                    <!-- 카드 그리드 -->
                    <div class="grid-container grid-3" id="massageCards">
                        <!-- 카드들이 여기에 동적으로 생성됩니다 -->
                    </div>

                    <!-- 로딩 스피너 -->
                    <div class="loading-spinner" id="loadingSpinner">
                        <div class="spinner"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 푸터 -->
    <div id="footer-container"></div>

    <!-- 스크립트 -->
    <script src="../../shared/js/config.js"></script>
    <script>
        // 공용 헤더/푸터 로드
        document.addEventListener('DOMContentLoaded', async function() {
            // 헤더 로드
            const headerContainer = document.getElementById('header-container');
            try {
                const headerResponse = await fetch('../../shared/components/header.html?v=' + CONFIG.SITE.version);
                const headerHTML = await headerResponse.text();
                headerContainer.innerHTML = headerHTML;
                
                // 헤더 로드 완료 후 헤더 스크립트 로드
                const headerScript = document.createElement('script');
                headerScript.src = '../../shared/js/header.js';
                headerScript.onload = function() {
                    console.log('헤더 스크립트 로드 완료');
                    // 헤더 스크립트가 로드된 후 스크롤 이벤트 다시 트리거
                    window.dispatchEvent(new Event('scroll'));
                };
                document.body.appendChild(headerScript);
            } catch (error) {
                console.error('헤더 로드 실패:', error);
            }
            
            // 푸터 로드
            const footerContainer = document.getElementById('footer-container');
            try {
                const footerResponse = await fetch('../../shared/components/footer.html?v=' + CONFIG.SITE.version);
                const footerHTML = await footerResponse.text();
                footerContainer.innerHTML = footerHTML;
            } catch (error) {
                console.error('푸터 로드 실패:', error);
            }
            
            // 페이지가 완전히 로드된 후 플로팅 버튼 추가
            setTimeout(async () => {
                await loadFloatingContact({
                    kakaoId: 'echopaldanang',  // 기본 카카오톡 ID
                    phone: '+84123456789'      // 기본 전화번호
                });
            }, 100);
        });
    </script>
    <script src="js/fullvilla-script.js"></script>
</body>
</html>
