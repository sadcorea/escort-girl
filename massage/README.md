# 💆 마사지 섹션 가이드

## 📅 최종 업데이트: 2025년 6월 1일

## 🎯 완성 상태

### ✅ **완성된 기능**
- **마사지 전체보기 페이지**: index.html (접근: /massage/index.html)
- **마사지 상세페이지**: 100% 완성 (detail.html)
- **노션 연동**: 100% 완성 (모든 필드 매핑)
- **Pinterest 갤러리**: 2열 그리드, 이미지 비율 자동 조정
- **UX 시스템**: 연락처/주소 복사, 스크롤바 숨김, 고급 디자인

### ❌ **미완성 기능**
- 추가 기능 개발 여지 있음

---

## 🔗 메인 인덱스 연동 시스템

### **섹션 모듈화 구조**
마사지도 메인 인덱스(`/index.html`)에서 **섹션 방식**으로 임베드됩니다:

```
메인 인덱스 (/index.html)
    ↓ (섹션 임베드 예정)
sections/massage-section.html
    ↓ (구글맵 + 광고박스)
components/massage-section.js (예정)
    ↓ (클릭 시 이동)
massage/index.html → massage/detail.html?id=X
```

### **현재 접근 경로**
```javascript
// 메인 인덱스 → 마사지 전체보기
"massage/index.html"

// 전체보기 → 마사지 상세
"detail.html?id=1"

// 상세페이지 → 전체보기
"index.html"

// 상세페이지 → 메인 홈
"../index.html"
```

### **표준 템플릿 지위**
마사지 섹션은 **모든 업체군의 표준 템플릿**으로 확정되었습니다:
- **적용 대상**: 가라오케, 풀빌라, 레스토랑, 투어 등
- **복사 방식**: 80% 폴더 복사 + 20% 커스텀
- **개발 효율**: 기존 2주 → 2-3일로 단축

---

## 📁 디렉토리 구조

```
massage/
├── index.html                    # 🏠 마사지 전체보기 페이지
├── detail.html                   # 📄 마사지 상세페이지
├── shop-image.html               # 🖼️ 이미지 모듈 (Pinterest 갤러리)
├── shop-info.html                # ℹ️ 정보 모듈 (연락처, 주소, 운영정보)
├── css/
│   └── detail.css                # 🎨 완성된 스타일시트
├── js/
│   ├── massage-detail-data.js    # 📊 노션 데이터 로더
│   ├── massage-detail-ui.js      # 🎭 UI 렌더링 엔진
│   └── massage-detail-main.js    # 🎯 메인 컨트롤러
├── backup/
│   └── README.md                 # 📋 백업 파일 설명
└── README.md                     # 📖 이 파일
```

---

## 📄 파일별 상세 설명

### **🏠 index.html** (마사지 전체보기 페이지)
- **역할**: 마사지 업체 목록 및 전체보기
- **접근**: `http://localhost:8080/massage/index.html`
- **기능**: 업체 목록, 검색, 필터링, 페이지네이션
- **상태**: ✅ 완성

### **📄 detail.html** (마사지 상세페이지)
- **역할**: 마사지 업체 상세 정보 표시
- **구조**: 모듈화된 2개 섹션 로드
  - 왼쪽: `shop-image.html` (이미지 갤러리)
  - 오른쪽: `shop-info.html` (업체 정보)
- **접근**: `detail.html?id=1` (URL 파라미터로 업체 ID 전달)
- **상태**: ✅ 100% 완성

### **🖼️ shop-image.html** (이미지 모듈)
- **역할**: Pinterest 스타일 이미지 갤러리
- **특징**:
  - 2열 그리드 레이아웃
  - 가로 고정, 세로 비율 자동 조정
  - 이미지만 표시 (텍스트 제거)
  - 스크롤바 숨김
  - 클릭 시 이미지 모달
- **데이터**: 노션 '업체사진' 필드에서 로드
- **상태**: ✅ 100% 완성

### **ℹ️ shop-info.html** (정보 모듈)
- **역할**: 업체 정보, 연락처, 주소, 운영정보 표시
- **구성**:
  - 업체명 (중앙정렬)
  - 서비스 태그 + 언어 태그
  - 홍보문구 (노션에서 로드)
  - 연락처 (전화, 카카오ID + 복사 버튼)
  - 주소 (VN/KR 분리, 짧은 표시 + 전체 복사)
  - 운영정보 (회색 박스)
- **상태**: ✅ 100% 완성

### **🎨 css/detail.css** (스타일시트)
- **역할**: 전체 상세페이지 디자인
- **특징**:
  - 고급 디자인 (그라데이션, 부드러운 그림자)
  - Pinterest 갤러리 스타일
  - 호버 애니메이션
  - 모바일 완전 최적화
  - 기존 스타일 충돌 방지
- **상태**: ✅ 100% 완성

### **📊 js/massage-detail-data.js** (데이터 로더)
- **역할**: 노션 API 연동 및 데이터 로드
- **기능**:
  - 노션 마사지 DB 연결 (ID: `203e5f74-c72e-815d-8f39-d2946ee85c0a`)
  - 모든 필드 매핑 완료
  - 백업 데이터 자동 전환
  - URL 파라미터 ID 파싱
- **매핑된 필드**:
  - 기본: 업체명, 연락처, GPS좌표
  - 주소: kr 업체주소, vn 업체주소
  - 연락: 카카오ID
  - 서비스: 서비스종류, 언어지원, 운영시간, 휴무일
  - 마케팅: 홍보문구, 특별혜택, 업체사진
- **상태**: ✅ 100% 완성

### **🎭 js/massage-detail-ui.js** (UI 렌더링)
- **역할**: 화면에 데이터 표시 및 사용자 인터랙션
- **주요 기능**:
  - Pinterest 갤러리 생성
  - 연락처 복사 버튼 (전화, 카카오)
  - 주소 표시/복사 (짧은 표시 + 전체 복사)
  - 운영정보 렌더링
  - 그랩 앱 연동
- **UX 특징**:
  - 주소 스마트 표시 ("Tran Phu Street 부근")
  - 원클릭 복사 기능
  - 이미지 모달
- **상태**: ✅ 100% 완성

### **🎯 js/massage-detail-main.js** (메인 컨트롤러)
- **역할**: 모듈 로드 및 전체 페이지 초기화
- **기능**:
  - HTML 모듈 동적 로드
  - 데이터 로더 + UI 렌더러 연결
  - 에러 처리 및 백업 시스템
  - 네비게이션 함수
- **상태**: ✅ 100% 완성

---

## 🔗 노션 연동 정보

### **데이터베이스 ID**
```
203e5f74-c72e-815d-8f39-d2946ee85c0a
```

### **매핑된 노션 필드**
| 노션 컬럼명 | JavaScript 변수 | 설명 |
|------------|-----------------|------|
| ID | id | 업체 고유 번호 |
| 업체명 | name | 업체 이름 |
| 연락처 | phone | 전화번호 |
| kr 업체주소 | krAddress | 한국어 주소 |
| vn 업체주소 | vnAddress | 베트남어 주소 |
| GPS좌표 | gps | 위도,경도 |
| 서비스종류 | services | 타이, 오일, 아로마 등 |
| 언어지원 | languages | 한국어, 영어 등 |
| 운영시간 | operatingHours | 영업시간 |
| 휴무일 | holidays | 휴무일 |
| 홍보문구 | adText | 업체 홍보 텍스트 |
| 특별혜택 | specialOffer | 할인, 이벤트 정보 |
| 카카오ID | kakaoId | 카카오톡 연락처 |
| 업체사진 | images | 갤러리 이미지들 |
| 계약상태 | status | 활성/비활성 |

---

## 🚀 사용법

### **페이지 접근**
```
http://localhost:8080/massage/detail.html?id=1
```
- `id` 파라미터: 노션 DB의 업체 ID (1, 2, 3...)

### **개발 환경**
1. **프록시 서버 실행**: `python proxy_server.py`
2. **브라우저 접속**: `http://localhost:8080/massage/detail.html?id=1`

### **노션 데이터 관리**
1. 노션 DB에서 업체 정보 추가/수정
2. 웹사이트 자동 반영 (코드 수정 불필요)

---

## 🔮 향후 개발 과제

### **우선순위 1: 마사지 전체보기 페이지**
- **파일**: `index.html` (새로 개발 필요)
- **기능**: 업체 목록, 검색/필터, 페이지네이션
- **참고**: `../ecogirl/gallery.html` 구조 참조

### **우선순위 2: 메인 페이지 연동**
- **링크**: 메인 페이지에서 마사지 섹션으로 이동
- **경로**: `massage/index.html` (전체보기) → `detail.html` (상세)

### **우선순위 3: 추가 기능**
- **영어 버전**: `detail-en.html`
- **모바일 앱**: React Native
- **관리자 도구**: 노션 외 추가 관리 기능

---

## 🛠️ 기술적 특징

### **모듈화 아키텍처**
- HTML 모듈 분리로 유지보수성 극대화
- 각 섹션 독립 개발 가능
- 재사용 가능한 컴포넌트 구조

### **Pinterest 스타일 갤러리**
- CSS Grid + `grid-auto-rows: max-content`
- 이미지 비율 자동 조정
- 모바일 완전 최적화

### **스마트 주소 시스템**
- 화면 표시: "Tran Phu Street 부근" (간단)
- 복사 기능: "157 Tran Phu Street, Hai Chau District, Da Nang" (전체)
- 번지 자동 제거 로직

### **완전한 노션 연동**
- 실시간 데이터 반영
- 모든 필드 완전 매핑
- 백업 시스템으로 안정성 확보

---

**📞 문의**: 마사지 시스템 관련 기술 문의  
**🔄 마지막 업데이트**: 2025년 6월 1일 - 상세페이지 완전 구축  
**🎯 다음 과제**: 전체보기 페이지 개발
